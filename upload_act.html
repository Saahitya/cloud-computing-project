<html>
<head>
  <title> Upload Act</title>
</head>
<body>
  <label> Actid </label> <br> <br>
  <input type="number" placeholder="ID" id = "actid"><br><br>
  <lable> Username </label><br><br>
  <input type="text" placeholder="name" id = "name"><br><br>
  <label>TimeStamp</label><br><br>
  <input type="text" placeholder="DD-MM-YYYY:SS-MM-HH" id = "time"><br><br>
  <label> Caption </label><br><br>
  <input type="text" placeholder="Caption" id = "caption"><br><br>
  <label> Image Base 64</label><br><br>
  <input type="text" placeholder="image" id = "image"><br><br>
  <label> Category </label><br><br>
  <input type="text" placeholder="category" id = "cat"></br></br>
  <button type="submit" onclick = "fun()">Submit</button>
  <script>
  function fun()
  {
    var id = document.getElementById("actid").value;
    if(id == "")
    {
      alert("ID feild is empty");
      location.replace("upload_act.html");
    }
    var name = document.getElementById("name").value;
    if(name == "")
    {
      alert("Name Field is Empty");
      location.replace("upload_act.html");
    }
    var time = document.getElementById("time").value;
    if(time == "")
    {
      alert("Time field is empty");
      location.replace("upload_act.html");
    }
    var caption = document.getElementById("caption").value;
    if(caption == "")
    {
      alert("Caption Field is empty");
      location.replace("upload_act.html");
    }
    var image = document.getElementById("image").value;
    if(image == "")
    {
      alert("Image field is empty");
      location.replace("upload_act.html");
    }
    var cat = document.getElementById("cat").value;
    if(cat == "")
    {
      alert("Category Field is empty");
      location.replace("upload_act.html");
    }
    var d = {};
    d["actId"] = Number(id);
    d["timestamp"] = time;
    d["caption"] = caption;
    d["img"] = image;
    //alert(image64);
    d["username"] = name;
    d["categoryName"] = cat;
    req = new XMLHttpRequest();
    var url = "http://127.0.0.1:5000/api/v1/acts";
    req.open("POST", url, true);
    req.setRequestHeader("Content-type", "application/json");
    var data = JSON.stringify(d);
    req.send(data);
    req.onload = function ()
    {
      if (req.status == 201)
      {
        alert("Act Added");
        location.replace("index.html");
      }
      else if(req.status == 405)
      {
        alert("Error with place values");
        location.replace("upload_act.html");
      }
      else
      {
          alert("Base_64 Encryption wrong");
          location.replace("upload_act.html");
      }
    }
  }
  </script>
</body>
</html>
