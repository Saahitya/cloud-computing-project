<html>
<head>
  <title>Add User </title>
</head>
<body>
  <p>Enter SHA-1 hash value of your password</p>
  <label> User Name </label>
  <input type="text" placeholder="User" id="user"> <br><br>
  <label>Password </label>
  <input type="password" placeholder="Password" id = "pass"></br></br>
  <button type="button" onclick="add()">Add New User</button>
  <script>
  function add()
  {
    var user_name = document.getElementById("user").value;
    var password = document.getElementById("pass").value;
    if(password == "")
    {
      alert("Empty Password Field");
      location.replace("add_user.html");
    }
    if(user_name == "")
    {
      alert("Empty User Field");
      location.replace("add_user.html");
    }
    //alert(user_name);
    //alert(password);
    req = new XMLHttpRequest();
    var url = "http://127.0.0.1:5000/api/v1/users";
    req.open("POST", url, true);
    req.setRequestHeader("Content-type", "application/json");
    var user_dict = {"username":user_name,"password":password};
    var data = JSON.stringify(user_dict);
    req.send(data);
    req.onload = function()
    {
      if(req.status == 201)
      {
        alert("User added");
        location.replace("index.html");
      }
      else if(req.status == 405)
      {
        alert("Error:User Already Exists or wrong SHA-1 Fromat");
        location.replace("add_user.html");
      }
      else
      {
        alert("Connection Problem!Try Again");
        location.replace("add_user.html");
      }
    }
  }
  </script>
</body>
</html>
